function cusp_id, type, ids = ids

    if n_elements(type) eq 0 then type = 'default'
    type = strlowcase(type[0])

    all = [$
        '1997_0908_16', '1997_0914_13', '1997_1001_12', '1997_1009_15', '1997_1012_13', $
        '1997_1026_15', '1998_0905_21', '1998_0908_02', '1998_0908_20', '1998_0912_14', $
        '1998_0914_19', '1998_0918_13', '1998_0919_23', '1998_0919_24', '1998_0922_04', $
        '1998_0922_23', '1998_0923_17', '1998_0925_05', '1998_0925_06', '1998_0928_21', $
        '1998_0928_23', '1998_0929_16', '1998_1001_02', '1998_1001_03', '1998_1001_21', $
        '1998_1002_16', '1998_1004_20', '1998_1007_20', '1998_1008_14', '1998_1008_15', $
        '1998_1009_08', '1998_1009_09', '1998_1016_18', '1998_1017_12', '1998_1018_05', $
        '1998_1019_18', '1998_1020_10', '1998_1020_11', '1998_1021_05', '1998_1022_18', $
        '1998_1023_11', '1998_1024_23', '1998_1026_10', '1998_1029_10', '1998_1029_11', $
        '1998_1030_03', '1998_1030_05', '1998_1031_14', '1998_1031_15', '1999_0902_13', $
        '1999_0904_17', '1999_0905_10', '1999_0905_12', '1999_0908_12', '1999_0910_16', $
        '1999_0911_12', '1999_0912_06', '1999_0914_12', '1999_0917_09', '1999_0917_11', $
        '1999_0920_09', '1999_0920_11', '1999_0922_15', '1999_0923_09', '1999_0929_10', $
        '1999_0930_04', '1999_1001_15', '1999_1002_08', '1999_1008_08', '1999_1009_20', $
        '1999_1010_15', '1999_1011_08', '1999_1020_06', '1999_1020_08', '1999_1022_14', $
        '1999_1028_15', '1999_1101_08']
        
    ; south IMF.
    simf = [$
        '1998_0925_05', '1998_0908_02', '1998_1001_02', '1998_1001_03', '1999_1010_15', $
        '1998_0912_14', '1998_0908_20', '1998_0923_17', '1998_1007_20', '1998_1019_18', $
        '1998_0905_21', '1999_1028_15', '1998_0929_16', '1998_1002_16', '1998_1009_08', $
        '1998_1022_18', '1998_1024_23', '1999_1101_08', '1998_0914_19', '1999_0920_09', $
        '1998_0919_23', '1998_0919_24', '1998_1017_12', '1999_0904_17', '1999_1001_15', $
        '1998_0918_13', '1998_1008_14', '1998_1016_18', '1999_0905_10', '1999_1011_08', $
        '1998_0922_23', '1999_0917_09', '1998_1020_11', '1998_1004_20', '1998_1008_15', $
        '1997_0914_13', '1999_0908_12', '1999_0930_04', '1997_1026_15', '1997_1012_13', $
        '1999_0902_13', '1999_0920_11', '1999_0905_12', '1999_0929_10']
    
    ; polar 2-4 Re.
    polar_2to4re = [$
        '2000_0902_07', '2000_0903_00', '2000_0907_13', '2000_0908_07', '2000_0909_19', $
        '2000_0910_14', '2000_0912_01', '2000_0912_20', '2000_0914_08', '2000_0915_20', $
        '2000_0917_08', '2000_0918_02', '2000_0919_15', '2000_1012_07', '2000_1013_01', $
        '2000_1014_14', '2000_1015_07', '2000_1018_08', '2000_1021_09', '2000_1024_10', $
        '2000_1028_05', '2000_1030_11', '2000_1031_05']
    
    ; polar south IMF. Dst 10 to -100. 2000_1014_14 is -95. 2000_0919_15 is -75. others are 10 to -50.
    polar_ion_outflow = [$
        '2000_0908_07','2000_1013_01']
    polar_simf = [$
        '2000_0902_07', '2000_0907_13', '2000_0908_07', '2000_0915_20', '2000_0919_15', $
        '2000_1012_07', '2000_1013_01', '2000_1014_14', '2000_1024_10']
    polar_cleft = [$
        '2000_0909_19', '2000_1028_05', '2000_1030_11', '2000_1031_05']
    polar_nimf = [$
        '2000_0903_00', '2000_0912_01', '2000_0917_08', '2000_0918_02', '2000_1015_07', $
        '2000_1021_09']
    polar_vimf = [$
        '2000_0912_20', '2000_1018_08']
    polar_noimf = [$
        '2000_0914_08']

    
    ; no IMF.
    noimf = [$
        '1997_0908_16', '1997_1001_12']
        
    ; vary IMF.
    vimf = [$
        '1998_0925_06', '1998_1001_21', '1998_1018_05', '1998_1021_05', '1998_1023_11', $
        '1998_1029_11', '1998_1030_03', '1998_1030_05', '1999_0911_12', '1999_0917_11', $
        '1999_0922_15', '1999_1002_08']
    
    ; north IMF.
    nimf = [$
        '1998_1029_10', '1999_0910_16', '1999_0912_06', '1999_0914_12', '1999_0923_09', $
        '1999_1008_08', '1999_1020_08']
    
    ; ion outflow. ionr <-0.5.
    ion_outflow5 = [$
        '1998_0905_21', '1998_0908_02', '1998_0914_19', '1998_0918_13', '1998_0923_17', $
        '1998_0925_05', '1998_1001_02', '1998_1001_03', '1998_1009_08', '1999_1010_15', $
        '1999_1011_08']
    
    ; ion outflow. ionr <-0.3.
    ion_outflow3 = [$
        '1998_0905_21', '1998_0908_02', '1998_0914_19', '1998_0918_13', '1998_0922_23', $
        '1998_0923_17', '1998_0925_05', '1998_0925_06', '1998_1001_02', '1998_1001_03', $
        '1998_1001_21', '1998_1008_15', '1998_1009_08', '1998_1021_05', '1998_1023_11', $
        '1999_0917_09', '1999_1002_08', '1999_1010_15', '1999_1011_08', '1999_1020_08', $
        '1999_1101_08']
    
    ; ion outflow. ionr <-0.4.
    ion_outflow4 = [$
        '1998_0905_21', '1998_0908_02', '1998_0914_19', '1998_0918_13', '1998_0922_23', $
        '1998_0923_17', '1998_0925_05', '1998_0925_06', '1998_1001_02', '1998_1001_03', $
        '1998_1001_21', '1998_1009_08', '1998_1021_05', '1998_1023_11', '1999_1002_08', $
        '1999_1010_15', '1999_1011_08', '1999_1101_08']
        
    ; ion outflow. KEi mapped > 1 mW/m^2.
    kei_small = [$
        '1997_0908_16', '1997_0914_13', '1997_1001_12', '1997_1012_13', '1997_1026_15', $
        '1999_0902_13', '1999_0905_12', '1999_0908_12', '1999_0910_16', '1999_0911_12', $
        '1999_0912_06', '1999_0914_12', '1999_0917_11', '1999_0920_09', '1999_0930_04']
    
    ion_outflow = cusp_calc_id(ion_outflow5, exclude = kei_small)
    
    ; low altitude conjunction. < 2 Re.
    low_altitude = [$
        '1997_0908_16', '1997_0914_13', '1997_1001_12', '1997_1009_15', '1997_1012_13', $
        '1997_1026_15', '1999_0902_13', '1999_0905_12', '1999_0908_12', '1999_0911_12', $
        '1999_0912_06', '1999_0914_12', '1999_0917_11', '1999_0920_11', '1999_0929_10', $
        '1999_0930_04']
    
    ; close conjunction.
    close_conjunction = [$
        '1999_0905_12', '1999_0908_12', '1999_0914_12', '1999_0930_04', '1999_0902_13']

    
    ; mlt 10.5-13.5, dMLT<1.
    close_mlt = [$
        '1997_0908_16', '1997_0914_13', '1997_1001_12', '1997_1009_15', '1997_1012_13', $
        '1997_1026_15', '1998_0908_02', '1998_0914_19', '1998_0919_23', '1998_0919_24', $
        '1998_0922_23', '1998_0923_17', '1998_0925_05', '1998_0925_06', '1998_0929_16', $
        '1998_1001_02', '1998_1001_03', '1998_1001_21', '1998_1002_16', '1998_1007_20', $
        '1998_1008_15', '1998_1009_08', '1998_1018_05', '1998_1019_18', '1998_1020_11', $
        '1998_1021_05', '1998_1022_18', '1998_1023_11', '1998_1029_10', '1998_1029_11', $
        '1999_0905_12', '1999_0908_12', '1999_0911_12', '1999_0914_12', '1999_0917_11', $
        '1999_0920_09', '1999_0922_15', '1999_0930_04', '1999_1001_15', '1999_1002_08', $
        '1999_1010_15', '1999_1011_08']
        
    ; mlt 10.5-13.5, dMLT<1, |dt|<1, AE<1000nT.
    close_quiet = [$
        '1998_1002_16', '1999_1001_15', '1998_1022_18', '1999_0930_04', '1997_1026_15', $
        '1998_1023_11', '1998_0923_17', '1999_0920_09', '1997_0914_13', '1999_1011_08', $
        '1998_0919_24', '1999_1002_08', '1998_1008_15', '1998_1029_10', '1999_0905_12', $
        '1997_1009_15', '1999_0922_15', '1997_1012_13', '1999_0908_12', '1999_0914_12']
        
    ; dEb in polar cap.
    polar_cap_deb = [$
        '1998_0914_19', '1998_1020_10', '1998_1023_11', '1998_1026_10', '1998_1029_10', $
        '1998_1029_11', '1999_0904_17', '1999_0905_10', '1999_0920_09', '1999_0923_09', $
        '1999_1001_15', '1999_1002_08', '1999_1008_08', '1999_1011_08', '1999_1020_06', $
        '1999_1020_08']
        
    ; fast in cleft.
    fast_cleft = [$
        '1997_1009_15', '1998_0908_20', '1998_0922_04', '1998_0929_16', '1998_1004_20', $
        '1998_1008_14', '1998_1009_09', '1998_1016_18', '1998_1017_12', '1998_1019_18', $
        '1998_1020_10', '1998_1024_23', '1998_1026_10', '1998_1031_14', '1998_1031_15', $
        '1999_0920_11', '1999_0929_10', '1999_1009_20', '1999_1020_06', '1999_1022_14', $
        '1999_1028_15']
    
    ; polar in cleft.
    polar_cleft = [$
        '1998_0928_21', '1998_0928_23', '1998_1004_20', '1998_1024_23', '1998_1031_14', $
        '1998_1031_15', '1999_0920_11']
        
    ; exclued.
    exclude = [$
        '1998_0912_14', $   ; not in conjunction.
        '']
    exclude = cusp_calc_id(exclude, fast_cleft, polar_cleft)

    if type eq 'default' then return, cusp_calc_id(all, exclude = exclude)
    if type eq 'south_imf' then return, cusp_calc_id(simf, exclude = exclude)
    if type eq 'north_imf' then return, cusp_calc_id(nimf, exclude = exclude)
    if type eq 'vary_imf' then return, cusp_calc_id(vimf, exclude = exclude)
    if type eq 'ion_outflow' then return, cusp_calc_id(ion_outflow, exclude = exclude)
    if type eq 'all' then return, all
    if type eq 'polar_cap_deb' then return, polar_cap_deb
    if type eq 'close_mlt' then return, cusp_calc_id(close_mlt, exclude = exclude)
    if type eq 'non_outflow' then return, cusp_calc_id(cusp_id('default'), exclude = cusp_id('ion_outflow'))
    if type eq '1999_09' then return, all[where(stregex(all,'1999_09') eq 0)]
    if type eq 'low_altitude' then return, cusp_calc_id(low_altitude, exclude = exclude)
    if type eq 'close_conjunction' then return, cusp_calc_id(close_conjunction)
    if type eq 'polar_2to4re' then return, cusp_calc_id(polar_2to4re)
    if type eq 'polar_south_imf' then return, polar_simf
    if type eq 'polar_ion_outflow' then return, polar_ion_outflow
    
    if n_elements(ids) ne 0 then return, cusp_calc_id(ids, exclude = exclude)

end